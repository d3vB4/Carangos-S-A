{% extends "base.html" %}

{% block title %}Dashboard - Carangos S/A{% endblock %}

{% block content %}
<div style="margin-bottom: 2.5rem; padding-top: 0.5rem;">
    <h1 style="font-size: 2.25rem; margin-bottom: 0.75rem;">
        Ol치, <span
            style="background: linear-gradient(135deg, var(--primary-color) 0%, #8B5CF6 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">{{
            user }}</span> 游녦
    </h1>
    <p style="color: var(--text-secondary); font-size: 1.05rem;">Bem-vindo ao painel de controle da Carangos S/A.</p>
</div>

<!-- Executive Summary (Visible only to Global Roles) -->
{% if role in ['admin', 'presidente', 'conselho'] %}
<div class="card" style="margin-bottom: 2.5rem;">
    <h2 style="color: var(--text-color); margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.75rem;">
        <i class="fas fa-chart-pie" style="color: var(--primary-color);"></i> Vis칚o Executiva
    </h2>
    <div class="kpi-grid">
        <div class="kpi-card">
            <i class="fas fa-industry" style="font-size: 2rem; color: var(--primary-color); margin-bottom: 0.5rem;"></i>
            <div class="label">Produ칞칚o Semanal</div>
            <div class="value" style="color: var(--primary-color);">{{ total_semanal if total_semanal else 'N/A' }}
            </div>
        </div>
        <div class="kpi-card"
            style="background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(239, 68, 68, 0.05) 100%); border-color: rgba(239, 68, 68, 0.2); border-left-color: var(--danger-color);">
            <i class="fas fa-dollar-sign"
                style="font-size: 2rem; color: var(--danger-color); margin-bottom: 0.5rem;"></i>
            <div class="label">Custo Total</div>
            <div class="value" style="color: var(--danger-color);">R$ {{ "%.2f"|format(custo_total_producao) if
                custo_total_producao else 'N/A' }}</div>
        </div>
        <div class="kpi-card"
            style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%); border-color: rgba(16, 185, 129, 0.2); border-left-color: var(--success-color);">
            <i class="fas fa-tag" style="font-size: 2rem; color: var(--success-color); margin-bottom: 0.5rem;"></i>
            <div class="label">Pre칞o Venda</div>
            <div class="value" style="color: var(--success-color);">R$ {{ "%.2f"|format(preco_venda) if preco_venda else
                'N/A' }}</div>
        </div>
        <div class="kpi-card"
            style="background: linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, rgba(245, 158, 11, 0.05) 100%); border-color: rgba(245, 158, 11, 0.2); border-left-color: var(--warning-color);">
            <i class="fas fa-users" style="font-size: 2rem; color: var(--warning-color); margin-bottom: 0.5rem;"></i>
            <div class="label">Funcion치rios</div>
            <div class="value" style="color: var(--warning-color);">{{ qtd_funcionarios if qtd_funcionarios else 'N/A'
                }}</div>
        </div>
    </div>
</div>
{% endif %}

<h2 style="margin-bottom: 1.5rem; color: var(--text-color); font-size: 1.5rem;">
    <i class="fas fa-th-large" style="color: var(--primary-color); margin-right: 0.5rem;"></i>M칩dulos do Sistema
</h2>

<div class="dashboard-grid" style="margin-top: 0;">
    {% if role in ['admin', 'presidente', 'conselho', 'diretor_operacional', 'gerente_montagem', 'func_producao'] %}
    <a href="{{ url_for('mod_operacional') }}" class="card card-hover" style="text-decoration: none; color: inherit;">
        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div
                style="width: 50px; height: 50px; background: linear-gradient(135deg, var(--primary-color) 0%, #2563EB 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-industry" style="font-size: 1.5rem; color: white;"></i>
            </div>
            <h3 style="margin: 0;">Operacional</h3>
        </div>
        <p style="color: var(--text-secondary); margin: 0;">Gerencie a produ칞칚o di치ria, turnos e relat칩rios de
            capacidade.</p>
    </a>
    {% endif %}

    {% if role in ['admin', 'presidente', 'conselho', 'diretor_operacional', 'gerente_insumos', 'func_estoque'] %}
    <a href="{{ url_for('mod_estoque') }}" class="card card-hover" style="text-decoration: none; color: inherit;">
        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div
                style="width: 50px; height: 50px; background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-warehouse" style="font-size: 1.5rem; color: white;"></i>
            </div>
            <h3 style="margin: 0;">Estoque</h3>
        </div>
        <p style="color: var(--text-secondary); margin: 0;">Controle de insumos, cadastro de produtos e verifica칞칚o de
            custos.</p>
    </a>
    {% endif %}

    {% if role in ['admin', 'presidente', 'conselho', 'diretor_financeiro', 'gerente_financeiro', 'func_financeiro'] %}
    <a href="{{ url_for('mod_financeiro') }}" class="card card-hover" style="text-decoration: none; color: inherit;">
        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div
                style="width: 50px; height: 50px; background: linear-gradient(135deg, var(--success-color) 0%, #059669 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-money-bill-wave" style="font-size: 1.5rem; color: white;"></i>
            </div>
            <h3 style="margin: 0;">Financeiro</h3>
        </div>
        <p style="color: var(--text-secondary); margin: 0;">Gest칚o de despesas fixas, custos de produ칞칚o e forma칞칚o de
            pre칞o.</p>
    </a>
    {% endif %}

    {% if role in ['admin', 'presidente', 'conselho', 'diretor_rh', 'gerente_rh', 'func_rh'] %}
    <a href="{{ url_for('mod_rh') }}" class="card card-hover" style="text-decoration: none; color: inherit;">
        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div
                style="width: 50px; height: 50px; background: linear-gradient(135deg, var(--warning-color) 0%, #D97706 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-users" style="font-size: 1.5rem; color: white;"></i>
            </div>
            <h3 style="margin: 0;">Recursos Humanos</h3>
        </div>
        <p style="color: var(--text-secondary); margin: 0;">Cadastro de funcion치rios, folha de pagamento e c치lculo de
            impostos.</p>
    </a>
    {% endif %}
</div>

{% if role == 'admin' %}
<div style="margin-top: 3rem;">
    <h2 style="margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.75rem;">
        <i class="fas fa-shield-alt" style="color: var(--danger-color);"></i>Painel Administrativo
    </h2>
    <div class="card">
        <p style="margin-bottom: 1.5rem; color: var(--text-secondary);">
            <i class="fas fa-check-circle" style="color: var(--success-color);"></i> Voc칡 tem acesso total ao sistema.
        </p>
        <a href="{{ url_for('create_user') }}" class="btn btn-primary">
            <i class="fas fa-user-plus"></i> Gerenciar Usu치rios
        </a>
    </div>
</div>
{% endif %}
{% endblock %}